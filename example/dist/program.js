(()=>{"use strict";var e={648:(e,t)=>{t.lR=t.BD=t.id=t.sk=void 0,t.sk=()=>"undefined"==typeof window;let n=0;var o;t.id=()=>(n++).toString(),t.BD=e=>n=>(...o)=>{let s=e.document,r="string"==typeof n?s.createElement(n):n;r.noop=()=>r,r.attr=(e,t)=>(r.setAttribute(e,t),r),r.setStaticProps=e=>{if(!(0,t.sk)())throw new Error("static props should never be called on client side");return r.staticProps=e,r},r.onStateChangeF=[],r.onStateChange=e=>{r.onStateChangeF.push(e)},r.eventListeners=[],r.realEventListener=r.addEventListener,r.addEventListener=(e,t)=>{r.eventListeners.push({event:e,handler:t}),r.realEventListener(e,t)};const a=e=>{let t=e.cloneNode(!0);for(let n=0;n<e.children.length;n++)t.appendChild(a(e.children[n]));if(console.log("in clone, a.eventListeners",e.eventListeners),e.eventListeners)for(const n of e.eventListeners)t.addEventListener(n.event,n.handler);return t};r.cloneWithEventListeners=()=>a(r),r.secret_id=(0,t.id)();for(const e of o)if("string"==typeof e){let t=s.createTextNode(e);r.append(t.cloneNode(!0))}else if(e instanceof Function){r.attr("listener-id",r.secret_id);let t=e(r.state);t.attr("arg-id",t.secret_id),r.addEventListener(`newState-${r.secret_id}`,(t=>{try{r.append(e(t.detail))}catch(e){console.log("error in hard-coded event listener")}})),s.addEventListener(`newState-${r.secret_id}`,(n=>{console.log("hard-coded event listener called");try{t.innerHTML="",t.append(e(n.detail))}catch(e){console.log("error in hard-coded event listener")}})),r.append(t)}else r.append(e);r.setState=t=>{r.onStateChangeF.length>0&&r.onStateChangeF.forEach((e=>e(t)));let{CustomEvent:n}=e;const o=new n(`newState-${r.secret_id}`,{detail:t});return r.state=t,s.dispatchEvent(o),r};const i=async e=>{let t={};for(let n=0;n<e.children.length;n++)t={...t,...await i(e.children[n])};if(void 0!==e.staticProps){let n=await e.staticProps();e.setState(n),t[e.secret_id]=n}return t};return r.attr("secret-id",r.secret_id),r.getStaticProps=async()=>await i(r),r.setCss=e=>{if("string"==typeof e){let t=e.split(";");for(const e of t){let[t,n]=e.split(":");if(!t||!n)throw new Error(`invalid css prop: ${t} and val: ${n}`);r.style[t]=n}}else{console.log("it's a function"),r.onStateChange((t=>{console.log("onstatechange css"),r.setCss(e(t))}));let t=e(r.state);console.log("css is",t),r.setCss(t)}return r},r},t.lR=(o=["href","referer"],e=>n=>(...s)=>{let r=(0,t.BD)(n)(e)(...s);for(const e of o)r[e]="",r[`$${e}`]=t=>(r[e]=t,r);return r})("a")}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(()=>{var e=n(648);console.log("[INFO] client runtime intialized");const t=(0,e.BD)(window),[o,s,r]=["div","p","button"].map(t),a=t("br")(),i=(0,e.lR)(window),c=(...e)=>{const t=i(...e);return t.addEventListener("click",(e=>{if(t.href){e.preventDefault();const n={page_id:1,user_id:5},o="",s=new URL(window.basePath).pathname+new URL(t.href).pathname.substring(1);history.pushState(n,o,s);const r=new CustomEvent("newPath");document.dispatchEvent(r)}})),t};console.log("[INFO] example program initialized");const l=o("welcome to tolcanci, a UI framework"),d=o("I am a reusable component"),p=o("we allow for reusable components",d,d),h=r("press me"),u=o((e=>o(o(`the current count ${e}`),o(`the next count wil be ${e+1}`)).setCss(`font-size: ${e+10}px`)),h);u.noop("cheese"),h.addEventListener("click",(()=>{u.setState(u.state+1)}));const f=o("we allow for stateful components",u),w=o("this is a component with static props (generated at build time)",(e=>o(e))).noop("cheese"),g=o("I have style",s("and so do I")).setCss("color:red"),v=c("we support using links").$href("https://www.youtube.com/watch?v=dQw4w9WgXcQ"),m=o("this is an spa",a,c("go to stuff").$href("/someStuff")),L=(e=>{const t=window,n=new URL(t.basePath).pathname,s=(t.location.pathname,e=>{let t=[e.substr(n.length),e.substr(n.length).substr(0,e.substr(n.length).length-5)];return"index"!==e.substr(n.length).substr(0,e.substr(n.length).length-5)&&"index"!==e.substr(n.length)||t.push(""),t}),r=()=>{const n=t.location.pathname,o=e[s(n).find((t=>!!e[t]))];if(!o)throw new Error(`no component for path ${s(n).join(", ")} `);return console.log(`in recalcuate, ${s(n).join(", ")} and ${o.innerHTML}`),o},a=r(),i=o();return i.append(a),document.addEventListener("newPath",(()=>{console.log("got newpath event");const e=r();i.innerHTML="",i.append(e)})),window.onpopstate=function(e){console.log("window pop");const t=r();i.innerHTML="",i.append(t)},i})({"":o(l,p,f,w,g,v,m),404:o("404 not found",a,c("go back to home").$href("/")),someStuff:o("stuff",a,c("go back to home").$href("/"))});var b;b=L,document.body.innerHTML="",document.body.append(b)})()})();